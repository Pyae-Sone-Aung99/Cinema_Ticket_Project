<div class="container p-3">
  <h5 class="ms-5 mb-3"><i class="bi bi-pencil me-2 text-danger"></i>Add Movie Form</h5>
  <form class="mt-3 mx-5 my-3" [formGroup]="movieForm" (submit)="onSubmit()">

    <div class="d-flex">
      <app-form-group [valid]="movieForm.get('title')!.valid" label="Title" class="mb-3 me-3">
        <input type="text" class="form-control" id="title" formControlName="title">
      </app-form-group>

      <app-form-group [valid]="movieForm.get('trailer')!.valid" label="Trailer" class="mb-3 me-3">
        <input type="text" class="form-control" id="trailer" formControlName="trailer">
      </app-form-group>
    </div>

    <div class="d-flex">
      <div class="mb-3 me-3" style="width: 100%;">
        <label for="selectedTimes" class="form-label">Select Theater</label>
        <select class="form-select form-select-sm" formControlName="theaterData" (change)="onChangeTheater()">
          <option selected>Choose ShowTime</option>
          <option *ngFor="let item of theaterData" [value]="item.id"> {{item.theaterName}} </option>
        </select>
      </div>

      <div class="mb-3" style="width: 100%;">
        <label for="type" class="form-label">Type</label>
        <div class="d-flex">
          <div class="form-check me-3">
            <input class="form-check-input" type="radio" value="2D" formControlName="type" id="flexRadioDefault1">
            <label class="form-check-label" for="flexRadioDefault1">
              2D
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" value="3D" formControlName="type" id="flexRadioDefault2"
              checked>
            <label class="form-check-label" for="flexRadioDefault2">
              3D
            </label>
          </div>
        </div>
      </div>
    </div>

    <div class="d-flex">

      <app-form-group [valid]="movieForm.get('duration')!.valid" label="Duration" class="mb-3 me-3"
        style="width: 100%;">
        <input type="text" class="form-control" id="duration" formControlName="duration">
      </app-form-group>

      <app-form-group [valid]="movieForm.get('poster')!.valid" label="Poster" class="mb-3 me-3" style="width: 100%;">
        <input type="text" class="form-control" id="poster" formControlName="poster">
      </app-form-group>

    </div>

    <div class="mb-3">
      <label for="plot" class="form-label">Plot</label>
      <textarea type="text" class="form-control" id="plot" formControlName="plot"></textarea>
    </div>



    <div class="mb-3">
      <div formArrayName="selectedTimes">
        <div class="d-flex" *ngFor="let timeGroup of selectedTimes.controls; let i = index" [formGroupName]="i">
          <div class="me-2">
            <label for="theaterType" class="form-label">Date</label>
            <input class="form-control me-2" type="date" formControlName="date">
          </div>
          <div class="me-2">
            <label for="theaterType" class="form-label">Start Time</label>
            <input class="form-control me-2" type="time" formControlName="starTime">
          </div>
          <div class="me-2">
            <label for="theaterType" class="form-label">End Time</label>
            <input class="form-control me-2" type="time" formControlName="endTime">
          </div>
          <button class="btn btn-outline-danger align-self-end" id="inner" (click)="removeTime(i)"><i
              class="bi bi-trash3"></i></button>
        </div>
      </div>

      <div class="  mt-3">
        <button type="button" class="btn btn-outline-primary btn-sm" (click)="addTime()">Add Time</button>
      </div>
    </div>


    <div class="d-flex float-end mb-4">
      <button class="btn btn-outline-danger me-3" mat-dialog-close="false">Cancel</button>
      <button type="submit" [class.disable]="!movieForm.valid" class="btn btn-outline-success float-end">{{data ?
        'Update' : 'Save'}} </button>
    </div>

  </form>
</div>
